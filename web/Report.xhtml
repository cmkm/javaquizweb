<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Java Quiz</title>
        <link rel="stylesheet" href="css/bttn.min.css"></link>
        <link rel="stylesheet" href="css/style.css"></link>

        <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
        <script type="text/javascript">
          google.charts.load('current', {'packages':['corechart']});
          google.charts.setOnLoadCallback(drawChart);

          function drawChart() {

            var data = google.visualization.arrayToDataTable([
              ['Correctness', 'Number of questions'],
              ['Incorrect',     #{data.results.get("Incorrect")}], 
              ['Correct', #{data.results.get("Correct")}]
            ]);

            var options = {
              title: 'Chapter #{data.selectedChapter} Report'
            };

            var chart = new google.visualization.PieChart(document.getElementById('piechart'));

            chart.draw(data, options);
          }
        </script>
        <!-- syntax highlighting -->
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/styles/default.min.css"></link>
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/highlight.min.js"></script>
    </h:head>
    
    <h:body>
        
        <div class="header">
            <h:form>
                <p>Welcome #{login.username}!</p>
            
                <h:commandLink action="#{login.logout()}" value="Log out"/>
            
            </h:form>
        </div>
    
        <h2>Chapter #{data.selectedChapter} Report</h2>
        <h:link outcome="Quiz.xhtml" value="Back to Chapter #{data.selectedChapter} Quiz"/><br/>
        <h:link outcome="Quiz.xhtml?chapter=0" 
                       value="Select another chapter"/><br/>
        
        <p>Your grade: #{(data.results.get("Correct") / data.results.get("Total")) * 100}%</p>
        
        <div id="piechart" class="center" style="width: 700px; height: 500px;"></div>
    
    </h:body>
</html>
